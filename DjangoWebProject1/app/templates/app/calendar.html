{% extends "app/layout.html" %}
{% load app_filters %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <a href="?year={{ previous_year }}&month={{ previous_month }}" class="btn btn-outline-primary">&lt; Попередній місяць</a>
        <h2>{{ month }} {{ year }}</h2>
        <a href="?year={{ next_year }}&month={{ next_month }}" class="btn btn-outline-primary">Наступний місяць &gt;</a>
    </div>

    <div class="row mb-3">
        <div class="col text-center">Пн</div>
        <div class="col text-center">Вт</div>
        <div class="col text-center">Ср</div>
        <div class="col text-center">Чт</div>
        <div class="col text-center">Пт</div>
        <div class="col text-center">Сб</div>
        <div class="col text-center">Нд</div>
    </div>

    {% for week in calendar_data|slice:":35"|divide_into_weeks %}
    <div class="row mb-4">
        {% for day in week %}
        <div class="col">
            {% if day %}
            <div class="card h-100 {% if day.exceeded %}bg-danger text-white{% else %}bg-success text-white{% endif %} shadow-sm">
                <a href="{% url 'log_food' %}?date={{ day.date|date:'Y-m-d' }}" class="text-decoration-none text-white">
                    <div class="card-body p-2">
                        <h5 class="card-title mb-2">{{ day.date|date:"d" }}</h5>
                        <p class="card-text small mb-0">
                            Калорії:<br>{{ day.calories|floatformat:0 }}
                        </p>
                    </div>
                </a>
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% endfor %}
</div>
{% endblock %}